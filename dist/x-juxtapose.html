<!-- Import Polymer -->
<link rel="import" href="../../polymer/polymer.html">
<link rel="import" href="juxtapose-import.html">

<polymer-element name="jx-image" attributes="src label credit">
    <template>
        <style>
            :host { display: none; }
        </style>
    </template>
    <script>
        Polymer('jx-image', {
            publish: {
                before: {
                  value: false,
                  reflect: true
                },
                after: {
                  value: false,
                  reflect: true
                }
            }
        });
    </script>
</polymer-element>


<polymer-element name="x-juxtapose" attributes="startingPosition showCredits showLabels animate orientation">

    <template>
        <link rel="stylesheet" href="../../juxtapose/build/css/juxtapose.css">
        <style>
            :host {
              position: relative;
            }
            #juxtapose {
              position: absolute;
              top: 0;
              right: 0;
              bottom: 0;
              left: 0;
            }
        </style>

        <div id="juxtapose"></div>
        <content id="graphics" select="jx-image"></content>
    </template>

    <script>
        Polymer('x-juxtapose', {

            startingPosition: "50%",
            showCredits: false,
            showLabels: false,
            animate: true,


            // Fires when an instance of the element is created
            created: function() {
                this.graphics = [];
            },

            // Fires when the "<polymer-element>" has been fully prepared
            ready: function() {
                this.updateGraphics();
                this.createSlider();
            },

            updateGraphics: function() {
                this.graphics = Array.prototype.slice.call(this.$.graphics.getDistributedNodes());
            },

            createSlider: function() {
                slider = new JXSlider('#juxtapose',
                    [
                        {
                            src: this.graphics[0].src,
                            label: this.graphics[0].label,
                            credit: this.graphics[0].credit,
                        },
                        {
                            src: this.graphics[1].src,
                            label: this.graphics[1].src,
                            credit: this.graphics[1].src,
                        }
                    ], {
                        animate: this.animate,
                        showLabels: this.showLabels,
                        showCredits: this.showCredits,
                        startingPosition: this.startingPosition
                    }
                );
            }
        });
    </script>

</polymer-element>
